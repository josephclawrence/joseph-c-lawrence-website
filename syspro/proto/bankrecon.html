<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>SYSPRO Product Visual Builder</title>

        <!-- Bootstrap -->
        <link href="css/new/UX_CSS_bootstrap.css" rel="stylesheet" />
        <link href="css/new/UX_CSS_bootstrap-main.css" rel="stylesheet" />


				<link href="css/postcss.css" rel="stylesheet" />
        <link href="css/UX_CSS_sysprofusionstyle.css" rel="stylesheet" />

				<link rel="stylesheet" href="css/gridstack.min.css">
				<link rel="stylesheet" href="css/gridstack-extra.css">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs-themes@1.0.0/tomorrow-night-blue.min.css">
            <!-- <link rel=”stylesheet” href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css"> -->

        <script>
            window.MSPointerEvent = null;
            window.PointerEvent = null;
        </script>
        <script type="text/javascript">
            WebFontConfig = {
                google: {
                    families: [
                        "Source+Sans+Pro:400,200,300,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic:latin",
                    ],
                },
            };
            (function() {
                var wf = document.createElement("script");
                wf.src = "https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";
                wf.type = "text/javascript";
                wf.async = "true";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(wf, s);
            })();
        </script>
        <script src="js/new/UX_JS_jquery.min.js"></script>
        <!-- <script src="js/UX_JS_velocity.min.js"></script> -->
        <script src="js/new/UX_JS_kendo.all.min.js"></script>
        <style>
         :root {
         --gradient-shadow: linear-gradient(
            45deg,
            #7B1FA2,
            #b90d7e,
            #ffffff

         );
         }
         .nav-tabs.nav-justified > li.nav-item > a.nav-link.sys-rd-t {
            border-top-right-radius: calc(var(--base-border-radius) + 1px);
            border-top-left-radius: calc(var(--base-border-radius) + 1px);
         }

         @keyframes animate {
            0% {
               background-position: 0 0;
            }
            50% {
               background-position: 300% 0;
            }
            100% {
               background-position: 0 0;
            }
         }
         @keyframes border-pulsate {
            0%   { border-color: #b9086f; }
            50%  { border-color: #7B1FA2; }
            100% { border-color: #b9086f; }
         }
         @keyframes pulse-purple {
            0% {
               transform: scale(1);
               box-shadow: 0 0 0 0 rgba(123, 31, 162, 0.7);
            }
            
            70% {
               transform: scale(1);
               box-shadow: 0 0 0 8px rgba(123, 31, 162, 0);
            }
            
            100% {
               transform: scale(1);
               box-shadow: 0 0 0 0 rgba(123, 31, 162, 0);
            }
         }
         #davinciButton {
            border: 3px solid rgba(255, 255, 255, 0.3);
            outline: none;
            background-color: #7B1FA2;
            background-image: linear-gradient(to right top, #7b1fa2, #8f1699, #a00e90, #ae0987, #b90d7e);
            z-index: 99;
            &.pulse {
               /* animation: border-pulsate 3s infinite; */
               animation: pulse-purple 2.4s infinite;
            }
            & .k-fab-text {
               display: none;
            }
            /* &:before,
            &:after {
               content: "";
               position: absolute;
               top: -2px;
               left: -2px;
               background: var(--gradient-shadow);
               background-size: 400%;
               width: calc(100% + 4px);
               height: calc(100% + 4px);
               z-index: -1;
               animation: animate 20s linear infinite;
            }
            &:after  {
               filter: blur(20px);
            } */
         }

         .k-chat {
            border-color: transparent;
            color: #212529;
            background-color: transparent;
            max-width: none;
            border-top: none;
            & .k-message-box {
               border-top: 1px solid #eee !important;
               padding: 15px 15px 15px;
               justify-content: flex-end;
               & input {
                  background: #eee;
                  border-radius: 20px;
                  height: 40px;
                  margin-right: 5px;
                  max-width: 750px;
               }
               & .k-button {
                  height: 40px;
                  padding: 0px;
                  width: 40px;
                  border-radius: 50%;
                  background-image: linear-gradient(to right top, #7b1fa2, #8f1699, #a00e90, #ae0987, #b90d7e) !important;
               }
            }
            & .k-avatar {
               background: #7B1FA2;
               border-radius: 50%;
               padding: 9px;
               background-image: linear-gradient(to right top, #7b1fa2, #8f1699, #a00e90, #ae0987, #b90d7e) !important;
            }
            & .k-card {
               border-color: var(--color_athens_gray_approx) !important;
               & .k-card-header {
                  background-color: var(--color_athens_gray_approx);
                  border-color: var(--color_athens_gray_approx);
               }
               & .k-card-actions {
                  & .k-button {
                     border-radius: 4px;
                     &.k-button-sm {
                        background: transparent !important;
                        color: var(--color_lochmara_approx) !important;
                        font-size: 11px;
                     }
                     &.sys-bg-very-light-gray {
                        background-color: #ecf0f1 !important;
                        color: #2c3e50 !important;
                     }
                  }
               }
            }
            & .k-card-list {
               margin: 2px 0 15px;
               width: 100%;
            }
            & .k-message-group {
               margin-bottom: 15px;
            }
            & .k-quick-replies {
               align-self: flex-end;
            }
            & .k-typing-indicator-bubble {
               & .k-bubble {
                  background-color: transparent;
                  border: none;
                  white-space: normal;
                  & .k-typing-indicator span {
                     background-color: #7b1fa2;
                  }
               }
            }
         }
         #daVinciWindow.k-window-content {
            padding-block: 0;
            padding-inline: 0;
         }
         .k-window[aria-labelledby="daVinciWindow_wnd_title"] {
            position: fixed !important;
            border-radius: 8px;
            & .k-window-titlebar {
               background-color: #7B1FA2 !important;
               background-image: linear-gradient(to right top, #7b1fa2, #8f1699, #a00e90, #ae0987, #b90d7e);
               padding-left: 0.8rem;
               border-top-left-radius: 8px;
               border-top-right-radius: 8px;
               & .k-window-titlebar-action {
                  color: white !important;
               }
            }
         }
         .davinciicon-light {
            color: rgb(162, 0, 162);
            opacity: 0.33;
            transition: opacity 0.25s;
            &:hover {
               opacity: 0.6;
            }
         }
         .davinciicon-dark {
            color: #7B1FA2;
         }
         .daVinciPopover {
            border: none;
            padding: 0px;
            & .popover-header {
               margin-top: 0px;
               background-color: #7B1FA2;
               background-image: linear-gradient(to right top, #7b1fa2, #8f1699, #a00e90, #ae0987, #b90d7e);
               padding: 0.2rem 0.5rem;
               color: #fff;
            }
            & .popover-body {
               padding: 0.5rem;
            }
            & .popover-footer {
               display: flex;
               justify-content: space-around;
               border-bottom-left-radius: 6px;
               border-bottom-right-radius: 6px;
               padding: 0.3rem 0.5rem;
               & a {
                  display: flex;
                  align-items: center;
                  &:hover {
                     text-decoration: none;
                  }
               }
            }
         }
         .daVinciPopoverTrigger, .daVinciDataPopoverTrigger, .daVinciAutoPopoverTrigger {
            cursor: pointer;
         }
         .fileUploadDropZone {
            /* border: none; */
            & .k-upload-button-wrap {
               width: 100%;
            }
         }

         .showmodelcard, .conflevel {
            cursor: pointer;
         }

         .models-table.table > tbody > tr > td {
            vertical-align: middle;
         }
         .davincifield {
            background-color: #e4b3e2 !important;
         }
         tr.matchedItem.matched {
            background-color: #ade7ca;
            &:hover {
               background-color: #c7eeda;
            }
         }
         .k-grid .k-table-alt-row.matchedItem.matched {
            background-color: #a6dcc1;
            &:hover {
               background-color: #bfe7d3;
            }
         }
         .k-grid tbody > tr:not(.k-detail-row).matchedItem.matched:hover {
            background-color: #bfe7d3;
         }

         .k-grid tr.k-table-row.k-selected.matchedItem.matched > td, .k-grid tr.k-table-row.k-selected.matchedItem.matched > .k-table-td {
            background-color: #62d096;
            color: var(--color_pickled_bluewood_approx);
         }
         .sys-bg-matched {
            background-color: #ade7ca;
         }
         .match-background.matchy {
            background: #ade7ca;
            & th, & td {
               background: #ade7ca;
            }
            
         }
         .nav-tabs.card-tabs > li > a.match-background.matchy{
            background: transparent;
            &.active {
               background: #ade7ca !important;
            }
         }
         /* match colour #ade7ca */
        </style>
    </head>

<body data-theme="" data-column-layout="" class="light-gradient-background body-view-mode">
  <nav id="fusion-toolbar" class="navbar navbar-default fixed-top navbar-controlbar fusion-top-toolbar toolbar-loaded">
    <div class="container-fluid">
        <ul class="nav navbar-nav navbar-left">
            <li class="nav-item">
                <a href="#" class="text-primary offcanvas-toggle fusion-main-page-buttons fusion-maininstance-buttons nav-link js-offcanvas-has-events" data-toggle="offcanvas" data-target="#fusion-sidebar-wrapper2" onclick="sysproInterop.bindProgramList($('#fusion-sidebar-wrapper2'));" style=""><i class="material-icons">menu</i></a>
            </li>
            <li>
                <a class="navbar-brand" href="#" onclick="sysproInterop.backToMenu();">
                    <img alt="Brand" src="img/UX_IMG_SYSPROLogo.png" style="height: 35px">
                </a>
            </li>
            <li class="nav-item back-to-menu">
                <a href="#" onclick="sysproInterop.backToMenu();" class="text-primary fusion-main-page-buttons fusion-maininstance-buttons nav-link" style=""><span class="hidden-xs">Home</span><i class="material-icons visible-xs">home</i></a>
            </li>
            <li class="nav-item breadcrumb-separator fusion-main-page-buttons" style="">
                <i class="material-icons">chevron_right</i>
            </li>
            <li class="nav-item sys-pd-l-10 application-sub-title fusion-main-page-buttons" style="">HOME MENU</li>
        </ul>
        <ul class="nav navbar-nav navbar-right sys-fg-primary">
            <li class=" nav-item">
                <a href="#" class="text-primary fusion-main-page-buttons nav-link fusion-current-account offcanvas-toggle js-offcanvas-has-events" onclick="sysproInterop.bindAvantiNotifications($('#fusion-sidebar-wrapper2'));" style="" data-toggle="offcanvas" data-target="#offcanvas-avanti-notifications">
                    <i class="material-icons">notifications</i>
                    <span class="badge sys-bg-danger avanti-notifications-count" style="display: none;"></span>
                </a>
            </li>

            <li class="dropdown nav-item">
                <a href="#" class="text-primary fusion-main-page-buttons nav-link fusion-current-account" data-toggle="dropdown" style=""><i class="material-icons">account_circle</i>
                    <span class="hidden-xs fusion-current-account-name">SYSPRO Administrator</span></a>
                <ul class="dropdown-menu multi-level nav sys-pd-t-5" role="menu">
                    <li>
                        <a href="#" class="syspro-toolbar-widget" onclick="sysproInterop.callPlugin('SRSMain', 'SRSQUE');"><i class="material-icons">list</i>Report Queue</a>
                    </li>
                    <li>
                        <a href="#" class="syspro-toolbar-widget" onclick="sysproInterop.showHelp();"><i class="material-icons">help</i>Help</a>
                    </li>
                    <li class="dropdown-submenu">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#"><i class="material-icons">palette</i>Themes</a>
                        <ul class="dropdown-menu sys-pd-t-5">
                            <li>
                                <a href="#" class="avant-theme-switch" data-themename="light" onclick="sysproInterop.setTheme(this);"><i class="material-icons sys-mg-r-5 sys-fg-white">check</i>Light</a>
                            </li>
                            <li>
                                <a href="#" class="avant-theme-switch" data-themename="dark" onclick="sysproInterop.setTheme(this);"><i class="material-icons sys-mg-r-5 sys-fg-white">check</i>Dark</a>
                            </li>
                            <li>
                                <a href="#" class="avant-theme-switch" data-themename="syspro-light" onclick="sysproInterop.setTheme(this);"><i class="material-icons sys-mg-r-5 sys-fg-success">check</i>Pastel</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="syspro-toolbar-widget" onclick="sysproInterop.closeSYSPROFusion(true);"><i class="material-icons">power_settings_new</i> Sign out</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
  </nav>

  <div id="loading-cover" style="display: none;" aria-hidden="true">
   <div class="loader-wrapper">
      <img class="loadinggif" src="img/UX_IMG_SYSPRO-ANIMATION.gif" alt="">

   </div>
</div>
  <span id="errorNotification" style="display:none;"></span>
  <span id="taskdialognotification" style="display:none;"></span>
  <span id="aiSuggestionNotification" style="display:none;"></span>
  <div id="dialog"></div>
  <div id="invisibleNodes"></div>

  <div id="fusion-wrapper">
    <div id="harness-container">
      <div id="wrapper" class="toggled">
        <nav nav="" id="navbar-toolbar" class="navbar navbar-default navbar-static-top navbar-controlbar sys-mg-off-b syspro-toolbar ">
          <div class="container-fluid">
            
          </div>
        </nav>
        <div class="container-fluid container-id-holder" id="main-container" style="padding-top: 40px;">
           
          <!-- Error Notification empty element -->
          <span id="errorNotification" style="display:none;"></span>
          <div class="row sys-mg-t-15">    
            <div class="col-sm-8 col-12 column-parent">
              <div class="panel sys-bd-off sys-box-shadow-off">
               <div class="row widget layout-widget grid-stack-item-content ps" >
                     <div class="col-sm-12 ">
                        <div class="panel card sys-widget sys-box-shadow-off sys-mg-off-b " >               
                           <div class="card-body sys-pd-l-15 sys-pd-r-15 d-flex justify-content-between sys-pd-b-5">
                              <span><b>Standard Bank</b> / Current account 797666434</span>
                              <span>05/10/2023 - 31/10/2023</span>
                              <a href="#">Upload file <i class="material-icons sys-txt-sm">upload_file</i></a>
                           </div>
                        </div>
                     </div>
                  </div>
                  <!-- <div class="row widget layout-widget grid-stack-item-content ps" >
                     <div class="col-sm-12 ">
                        <div class="panel card sys-widget sys-box-shadow-off sys-mg-off-b" >               
                           <div class="card-body sys-pd-l-15 sys-pd-r-15 sys-pd-off-t sys-pd-off-b">
                              <button class="btn btn-default sys-bg-white" id="autoMatch">
                                 Auto match
                                 <i class="material-icons davinciicon-dark">auto_awesome</i>
                              </button>
                              <button class="btn btn-default sys-bg-white">
                                 Manage rules
                                 <i class="material-icons">checklist_rtl</i>
                              </button>
                              <button class="btn btn-default sys-bg-white" id="openRulesWindow">
                                 <i class="material-icons sys-fg-primary">settings_suggest</i>
                              </button>
                           </div>
                        </div>
                     </div>
                  </div> -->
                  <!-- <hr> -->
                  <div class="row widget layout-widget grid-stack-item-content ps" >
                     <div class="col-sm-12 ">
                        <div class="panel card sys-widget sys-box-shadow-off " >               
                           <div class="panel-body card-body sys-pd-15 sys-pd-t-5">
                              <hr class="sys-mg-t-5 sys-mg-b-10 sys-fg-light-gray">
                              <div class="d-flex align-items-center">
                                 <div class="btn-group btn-group-md sys-mg-off" role="group" aria-label="Basic radio toggle button group">
                                    <input type="radio" class="btn-check" name="filterGrid" id="filterGrid1" autocomplete="off" checked>
                                    <label class="btn btn-outline-primary" for="filterGrid1">All</label>
                                  
                                    <input type="radio" class="btn-check" name="filterGrid" id="filterGrid2" autocomplete="off">
                                    <label class="btn btn-outline-primary" for="filterGrid2">Unresolved</label>
                                  
                                    <input type="radio" class="btn-check" name="filterGrid" id="filterGrid3" autocomplete="off">
                                    <label class="btn btn-outline-primary" for="filterGrid3">Matched</label>
                                  </div>
                                 <span class="ms-auto">
                                    <button class="btn btn-default sys-bg-white" id="autoMatch">
                                       Auto match
                                       <i class="material-icons davinciicon-dark">auto_awesome</i>
                                    </button>
                                    <button class="btn btn-default sys-bg-white" id="openMatchRulesWindow">
                                       Manage rules
                                       <i class="material-icons">checklist_rtl</i>
                                    </button>
                                    <button class="btn btn-default sys-bg-white k-justify-self-end" id="openRulesWindow">
                                       <i class="material-icons sys-fg-primary">settings_suggest</i>
                                    </button>
                                 </span>
                              </div>
                        
                              <div class="tab-content">
                                 <div id="unmatched" class="tab-pane fade in show active sys-pd-5" role="tabpanel">
                                    <div id="bankGrid"></div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
              </div>

            </div>
            <div class="col-sm-4 col-12 column-parent">
              <div class="panel sys-bd-off sys-box-shadow-off">
                <div class="panel-body main-column">
                  <div class="row widget layout-widget grid-stack-item-content "  >
                     <div class="col-12">
                        <div class="panel card sys-widget sys-box-shadow-off " >               
                           <div class="panel-body card-body sys-pd-5">

                              <ul class="nav nav-tabs nav-justified sys-bg-white card-tabs " role="tablist" id="matchTabs">
                                 <li class="nav-item">
                                    <a class="nav-link active sys-mg-off-b  match-background sys-rd-t" data-toggle="tab" id="matchTab" data-bs-toggle="tab" href="#match">Match</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link sys-mg-off-b" data-toggle="tab" data-bs-toggle="tab" id="createTab" href="#create">Create</a>
                                 </li>
                                 <li class="nav-item">
                                    <a class="nav-link sys-mg-off-b" data-toggle="tab" data-bs-toggle="tab" href="#transfer">Transfer</a>
                                 </li>
                              </ul>
                        
                              <div class="tab-content">
                                 <div id="match" class="tab-pane fade in show active sys-pd-5 match-background sys-rd-b" role="tabpanel">
                                    <div id="noMatch" class=" sys-pd-t-15">
                                       <p class="lead text-center">Select a transaction</p>
                                    </div>
                                    <div id="matchFound" style="display: none">
                                       <p><b>Jim's Auto</b></p>
                                       <p><small>00HG54</small></p>
                                       <table class="table table-noborder table-condensed table-sm">
                                          <thead>
                                             <tr>
                                                <th>Date</th>
                                                <th class="text-right">Debit</th>
                                                <th class="text-right">Credit</th>
                                             </tr>
                                          </thead>
                                          <tbody>
                                             <tr>
                                                <td>21/10/2023</td>
                                                <td class="text-right">$0.00</td>
                                                <td class="text-right">$1589.00</td>
                                             </tr>
                                          </tbody>
                                          <tfoot>
                                             <tr>
                                                <td></td>
                                                <td class="text-right"></td>
                                                <td class="text-right"><b>$1589.00</b></td>
                                             </tr>
                                          </tfoot>
                                       </table>
                                       <table class="table table-noborder table-condensed table-sm">
                                          <tbody>
                                             <tr>
                                                <td><b>Account</b></td>
                                                <td class="text-right">21 - Plant & Machinery</td>
                                             </tr>
                                          </tbody>                                          
                                       </table>
                                       <div class="row">
                                          <div class="col-12 d-flex justify-content-center sys-pd-b-15 sys-pd-t-5">
                                             <button id="approveMatch" class="btn btn-success">Approve</button>
                                          </div>
                                       </div>
                                    </div>
                                 </div>

                                 <div id="create" class="tab-pane fade sys-pd-t-5" role="tabpanel">

                                    <table class="table table-noborder table-condensed table-sm">
                                       <thead>
                                          <tr>
                                             <th>Date</th>
                                             <th class="text-right">Debit</th>
                                             <th class="text-right">Credit</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                          <tr>
                                             <td>21/10/2023</td>
                                             <td class="text-right">$0.00</td>
                                             <td class="text-right">$1589.00</td>
                                          </tr>
                                       </tbody>
                                       <tfoot>
                                          <tr>
                                             <td></td>
                                             <td class="text-right"></td>
                                             <td class="text-right"><b>$1589.00</b></td>
                                          </tr>
                                       </tfoot>
                                    </table>
                                    <div class="row">
                                       <div class="col-6">
                                          <div class="form-group row is-empty" >

                                             <label for="  Customer purchase order" class="col-md-5 control-label col-form-label sys-mg-t-5 sys-pd-t-5">
                                                 <span>  Title</span>
                                             </label>
                                                <div class="col-md-6 col-xs-11 col-11 syspro-entry-content">
                                                   <input type="text" class="form-control syspro-trackfield-input syspro-trackfield-keydown syspro-trackfield-change syspro-focusable syspro-supports-mask" id="Fields.IMP040L3CustomerPurchaseOrder" autocomplete="off" maxlength="">
                                                 
                                                   <p class="help-block form-text text-muted syspro-entryfield-description syspro-help-block disabled-help-block" data-bind="htmltext:  Fields.IMP040L3CustomerPurchaseOrder.Description"></p>
                             
                                                </div>
                             
                                          </div>
                                       </div>
                                       <div class="col-6">
                                          <div class="form-group row is-empty" data-guid="6b794c94-8276-4320-e814-7f96de78d3b4" data-bind="hidden: Fields.IMP040L3TaxStatus.Hidden">
            

                                             <label for="  Tax status" class="col-md-5 control-label col-form-label sys-mg-t-5 sys-pd-t-5">
                                                 <span data-bind="htmltextnonull: Fields.IMP040L3TaxStatus.Caption">  Account</span>
                                             </label>
                                                <div class="col-md-6 col-xs-11 col-11 syspro-entry-content">
                                                            <span title="" class="k-picker k-dropdownlist form-control dropdown-select syspro-dropdown-trackfield-change k-picker-solid k-picker-sm k-rounded-md" unselectable="on" role="combobox" >
                                                               <span id="ad7ccbe1-b5f7-4b21-bc3f-83e1ec2038be" unselectable="on" class="k-input-inner">
                                                                  <span class="k-input-value-text"></span>
                                                               </span>
                                                               <span role="button" class="k-input-button k-button k-button-sm k-button-solid k-button-solid-base k-icon-button" aria-label="select" type="button">
                                                                  <span class="k-svg-icon k-svg-i-caret-alt-down k-button-icon" aria-hidden="true">
                                                                     <svg viewBox="0 0 512 512" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M256 352 128 160h256L256 352z"></path></svg>
                                                                  </span>
                                                               </span>
                                                               <input id="Fields.IMP040L3TaxStatus" data-role="dropdownlist" class="form-control dropdown-select syspro-dropdown-trackfield-change"  data-size="small" style="display: none;">
                                                            </span>
                                                      </div>                                             
                                       
                                                </div>
                                       </div>
                                    </div>
                                    

                                    
                                 </div>

                                 <div id="transfer" class="tab-pane fade sys-pd-t-5" role="tabpanel">
                                    <div class="col-xs-12 col-12">
                                       <div class="form-group">
                                          <div class="row">
                                             <label for="fromAccount" class="col-md-5 control-label col-form-label sys-mg-t-5 sys-pd-t-5">From account</label>
                                             <div class="col-md-7 col-xs-11 col-11 syspro-entry-content">
                                                <input id="fromAccount" name="fromAccount" class="form-control" />
                                                <!-- <select class="form-control dropdown-select" name="fromAccount" autocomplete="off">'
                                                   <option value="nothing">Account name</option>
                                                   <option value="anotherthing" selected>Account Name 2</option>
                                                   <option value="anotherthing">Account Name 3</option>
                                                </select> -->
                                             </div>
                                          </div>
                                          
                                       </div>
                                    </div>

                                    <div class="col-xs-12 col-12">
                                       <div class="form-group">
                                          <div class="row">
                                             <label for="toAccount" class="col-md-5 control-label col-form-label sys-mg-t-5 sys-pd-t-5">To account</label>
                                             <div class="col-md-7 col-xs-11 col-11 syspro-entry-content">
                                                <input id="toAccount" name="toAccount" class="form-control" />
                                                <!-- <select class="form-control dropdown-select" name="fromAccount" autocomplete="off">'
                                                   <option value="nothing">Account name</option>
                                                   <option value="anotherthing" selected>Account Name 2</option>
                                                   <option value="anotherthing">Account Name 3</option>
                                                </select> -->
                                             </div>
                                          </div>
                                          
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>

                </div>
              </div>
            </div>            

        </div>
      </div>
      <div class="statusBar sys-bg-inverse" style="display: block;">
        <span class="status-message sys-fg-very-light-gray">The OUTDOORS Company (EDU1)  Your license expires February 1st           TUESDAY 8   JANUARY 2019</span>
      </div>
    </div>

    <button id="davinciButton" class="pulse"><i class="material-icons">auto_awesome</i></button>
    


    <footer id="thefooter" style="background-image: url('../../Samples/UX_IMG_cloud_erp_light_footer.png');">
      <span id="copyrightfooter">© SYSPRO All Rights Reserved. All trademarks are recognized.</span><span id="sysprofooter">Powered by SYSPRO ERP</span>
    </footer>

  </div>

   <div id="daVinciWindow">
      <div id="daVinciChat" style="width: 100%; height: 100%"></div>
   </div>

   <div id="matchRulesWindow">
      <div class="container-fluid window-container">
         <div class="row window-content">
            <div class="col-12">
               <p>Here would be UI to manage a list of match templates, e.g. 'Software and IT costs', or 'Sales revenue'. These can be used by the matching algorithm to correctly configure the GL entry, when matched to some specific transaction. </p>
            </div>
         </div>
      </div>
   </div>

   <div id="rulesWindow">
      <div class="container-fluid window-container">
         <div class="row window-content">
            <div class="col-12">
               <p>Manage the weighting of the different bits of transaction data for matching bank transactions to GL entries.</p>
               <!-- <div class="row">
                  <div class="col-8 offset-2"> -->
                     <div class="form-group row sys-mg-t-10">
                        <div class="col-7">
                           <b>Transaction data</b>
                        </div>
                        <div class="col-5">
                           <b>Proportion</b>
                        </div>
                     </div>
                     <hr class="sys-mg-b-5 sys-mg-t-5">
                     <div class="form-group row is-empty sys-mg-b-10" >
   
                        <label for="  Customer purchase order" class="col-7 control-label col-form-label sys-mg-off-t sys-pd-off-t">
                            <span>Title</span>
                        </label>
                        <div class="col-4 col-xs-11 syspro-entry-content">
                           <input type="number" class="form-control text-right" maxlength="" value="10">   
                        </div>   
                        <div class="col-1">
                           %
                        </div>     
                     </div>
                     <div class="form-group row is-empty sys-mg-b-10" >
   
                        <label for="  Customer purchase order" class="col-7 control-label col-form-label sys-mg-off-t sys-pd-off-t">
                            <span>Date</span>
                        </label>
                        <div class="col-4 col-xs-11 syspro-entry-content">
                           <input type="number" class="form-control text-right" maxlength="" value="30">   
                        </div>   
                        <div class="col-1">
                           %
                        </div>     
                     </div>
                     <div class="form-group row is-empty sys-mg-b-10" >
   
                        <label for="  Customer purchase order" class="col-7 control-label col-form-label sys-mg-off-t sys-pd-off-t">
                            <span>Amount</span>
                        </label>
                        <div class="col-4 col-xs-11 syspro-entry-content">
                           <input type="number" class="form-control text-right" maxlength="" value="40">   
                        </div>   
                        <div class="col-1">
                           %
                        </div>     
                     </div>
                     <hr class="sys-mg-b-5 sys-mg-t-5">
                     <div class="form-group row sys-mg-t-5">
                        <div class="col-7">
                           <b>Total</b>
                        </div>
                        <div class="col-4 text-right">
                           <b>80</b>
                           <br>
                           <small>20% remaining</small>
                        </div>
                        <div class="col-1">
                           <b>%</b>
                        </div>
                     </div>
                  <!-- </div>
               </div> -->
            </div>
         </div>
      </div>
   </div>

  <script src="js/new/UX_JS_bootstrap.min.js"></script>
  <script src="js/UX_JS_forms.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>

  <script id="match-template" type="text/x-kendo-template">
   <p><b>#: name #</b></p>
   <p><small>#: id #</small></p>
   <table class="table table-noborder table-condensed table-sm">
      <thead>
         <tr>
            <th>Date</th>
            <th class="text-right">Debit</th>
            <th class="text-right">Credit</th>
         </tr>
      </thead>
      <tbody>
         <tr>
            <td>#: date #</td>
            <td class="text-right">#: kendo.toString(debit, 'c') #</td>
            <td class="text-right">#: kendo.toString(credit, 'c') #</td>
         </tr>
      </tbody>
      <tfoot>
         <tr>
            <td></td>
            <td class="text-right"></td>
            <td class="text-right"><b>#: debit > credit ? '-' : '' # #: kendo.toString(Math.max(debit, credit), 'c') #</b></td>
         </tr>
      </tfoot>
   </table>
   <table class="table table-noborder table-condensed table-sm">
      <tbody>
         <tr>
            <td><b>Account</b></td>
            <td class="text-right">21 - Plant & Machinery</td>
         </tr>
      </tbody>                                          
   </table>
   <div class="row">
      <div class="col-12 d-flex justify-content-center sys-pd-b-15 sys-pd-t-5">
         <button id="approveMatch" class="btn btn-success">Approve</button>
      </div>
   </div>
 </script>


  <script id="davinciresponse-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header d-flex justify-content-between">
         <div class="">
            #:title#
         </div>
         <div class="">
            <i class="material-icons sys-fg-gray sys-mg-r-10 showmodelcard" data-bs-toggle="tooltip" data-bs-title="Da Vinci Data Prediction">insights</i>
            <span class="conflevel">
            <i class="material-icons sys-fg-warning" data-bs-toggle="tooltip" data-bs-title="Confidence level">data_usage</i>
            <span class="sys-txt-sm sys-fg-gray">61%</span>
            </span>
         </div>
     </div>
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
     <div class="k-card-actions k-card-actions-end">
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="Please provide more technical information.">Technical info</span>
         </span>
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="There's something wrong with this.">Something's wrong</span>
         </span>
     </div>
   </div>
 </script>
 <script id="davincisumresponse-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header d-flex justify-content-between">
         <div class="">
            #:title#
         </div>
         <div class="">
            <i class="material-icons sys-fg-gray sys-mg-r-10 showmodelcard" data-bs-toggle="tooltip" data-bs-title="Da Vinci Text Generation">edit_note</i>
            <span class="conflevel">
            <i class="material-icons sys-fg-success" data-bs-toggle="tooltip" data-bs-title="Confidence level">data_usage</i>
            <span class="sys-txt-sm sys-fg-gray">84%</span>
            </span>
         </div>
     </div>
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
     <div class="k-card-actions k-card-actions-end">
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="Please provide more technical information.">Technical info</span>
         </span>
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="There's something wrong with this.">Something's wrong</span>
         </span>
     </div>
   </div>
 </script>

 <script id="davincitileresponse-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header d-flex justify-content-between">
         <div class="">
            #:title#
         </div>
         <div class="">
            <i class="material-icons sys-fg-gray sys-mg-r-10 showmodelcard" data-bs-toggle="tooltip" data-bs-title="Da Vinci Data Prediction">insights</i>
            <span class="conflevel">
            <i class="material-icons sys-fg-warning" data-bs-toggle="tooltip" data-bs-title="Confidence level">data_usage</i>
            <span class="sys-txt-sm sys-fg-gray">65%</span>
            </span>
         </div>
     </div>
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
     <div class="k-card-actions k-card-actions-end">
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="Please provide more technical information.">Technical info</span>
         </span>
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="There's something wrong with this.">Something's wrong</span>
         </span>
     </div>
   </div>
 </script>

 <script id="davinciautoresponse-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header d-flex justify-content-between">
         <div class="">
            #:title#
         </div>
         <div class="">
            <i class="material-icons sys-fg-gray showmodelcard" data-bs-toggle="tooltip" data-bs-title="Da Vinci Automated Process">smart_toy</i>
         </div>
     </div>
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
     <div class="k-card-actions k-card-actions-end">
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="Please provide more technical information.">Technical info</span>
         </span>
         <span class="k-card-action">
            <span class="k-button k-button-sm k-rounded-md k-button-flat k-button-flat-base" data-value="There's something wrong with this.">Something's wrong</span>
         </span>
     </div>
   </div>
 </script>

 <script id="technicalinfo-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header">
         Technical info
     </div>
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
   </div>
 </script>

 <script id="confidence-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header">
         Confidence levels
     </div>
     <div class="k-card-body">
       <p>A description of confidence levels and what they mean.</p>
       <table class="table">
         <tr>
            <td style="width: 5%"><i class="material-icons sys-fg-success">data_usage</i></td>
            <td><b>Over 75%</b></td>
         </tr>
         <tr>
            <td><i class="material-icons sys-fg-warning">data_usage</i></td>
            <td><b>55% - 75%</b></td>
         </tr>
         <tr>
            <td><i class="material-icons sys-fg-danger">data_usage</i></td>
            <td><b>Under 55%</b></td>
         </tr>
       </table>
     </div>
   </div>
 </script>

 <script id="models-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header">
         Confidence levels
     </div>
     <div class="k-card-body">
       <p>Da Vinci has three main tools it uses to help you understand your data, increase efficiency, and to run your operations more easily and speedily. Each type of tool is indicated by an icon that you might see when using SYSPRO.</p>
       <table class="table table-borderless models-table">
         <tr>
            <td><i class="material-icons sys-txt-lg sys-fg-gray">edit_note</i></td>
            <td>
               <h4 class="sys-mg-b-5"><b>Text Generation</b></h4>
               <p>A description of the LLM and natural languange processing capabilities of SYSPRO AI.</p>
            </td>
         </tr>
         <tr>
            <td><i class="material-icons sys-txt-lg sys-fg-gray">insights</i></td>
            <td>
               <h4 class="sys-mg-b-5"><b>Data Insights</b></h4>
               <p>A description of the data prediction and anomaly detection capabilities.</p>
            </td>
         </tr>
         <tr>
            <td><i class="material-icons sys-txt-lg sys-fg-gray">smart_toy</i></td>
            <td>
               <h4 class="sys-mg-b-5"><b>Task Automation</b></h4>
               <p>A description of automation, including OCR capabilities of Da Vinci.</p>
            </td>
         </tr>
       </table>
     </div>
   </div>
 </script>

 <script id="davinciconfirm-template" type="text/x-kendo-template">
   <div class="k-card">
      <div class="k-card-header sys-bg-success sys-fg-white">
         #:title#
     </div>
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
     <div class="k-card-actions k-card-actions-end">
         <span class="k-card-action">
            <span class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base" data-value="Go ahead">Go ahead</span>
         </span>
         <span class="k-card-action">
            <span class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base sys-bg-very-light-gray sys-fg-inverse" data-value="There's something wrong with this.">Cancel</span>
         </span>
     </div>
   </div>
   
 </script>

 <script id="olddavinciconfirmed-template" type="text/x-kendo-template">
   <div class="k-card sys-bg-success sys-fg-white">
     <div class="k-card-body">
       <p>#:content#</p>
     </div>
     <div class="k-card-actions k-card-actions-end">
         <span class="k-card-action">
            <span class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base" data-value="Please provide more technical information.">Go ahead</span>
         </span>
         <span class="k-card-action">
            <span class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base sys-bg-very-light-gray sys-fg-inverse" data-value="There's something wrong with this.">Cancel</span>
         </span>
     </div>
   </div>
   
 </script>
 <script id="davinciconfirmed-template" type="text/x-kendo-template">
   <p>#= content #</p>
 </script>

 <script id="davincicode-template" type="text/x-kendo-template">
   <pre><code>Imports System.Drawing

' Get the current year's sales total and the previous year's sales total
Dim currentYearSales As Decimal = ARSPEN.SalesTotal
Dim previousYearSales As Decimal = GetPreviousYearSales() ' You should implement this function

' Define your color constants
Dim greenColor As Color = Color.Green
Dim redColor As Color = Color.Red

' Check if the current year's sales total is greater than the previous year's
If currentYearSales > previousYearSales Then
    ' Set the text color to green
    ARSPEN.SalesTotal.ForeColor = greenColor
ElseIf currentYearSales <code previousYearSales Then
    ' Set the text color to red
    ARSPEN.SalesTotal.ForeColor = redColor
Else
    ' You can set a default color (e.g., black) if they are equal or handle this case differently
    ARSPEN.SalesTotal.ForeColor = Color.Black
End If

' Update the text to display the current year's sales total
ARSPEN.SalesTotal.Text = currentYearSales.ToString()

' Implement a function to get the previous year's sales total (replace with your data retrieval logic)
Function GetPreviousYearSales() As Decimal
    ' Replace this with your actual data retrieval logic
    ' For example, you could query a database or calculate it based on your data
    ' For demonstration purposes, we'll return a hardcoded value
    Return 10000.0 ' Replace with your actual value
End Function</code></pre>
 </script>

  <script>
   // TODO: create confirmatin notification for the chat, with links to the program or records that have been created, or some error notification
   const davinciresponse_template = kendo.template($('#davinciresponse-template').html());
   kendo.chat.registerTemplate("davinciresponse", davinciresponse_template);

   const davincisumresponse_template = kendo.template($('#davincisumresponse-template').html());
   kendo.chat.registerTemplate("davincisumresponse", davincisumresponse_template);

   const davincitileresponse_template = kendo.template($('#davincitileresponse-template').html());
   kendo.chat.registerTemplate("davincitileresponse", davincitileresponse_template);

   const davinciautoresponse_template = kendo.template($('#davinciautoresponse-template').html());
   kendo.chat.registerTemplate("davinciautoresponse", davinciautoresponse_template);

   const technicalinfo_template = kendo.template($('#technicalinfo-template').html());
   kendo.chat.registerTemplate("technicalinfo", technicalinfo_template);

   const davinciconfirm_template = kendo.template($('#davinciconfirm-template').html());
   kendo.chat.registerTemplate("davinciconfirm", davinciconfirm_template);

   const davinciconfirmed_template = kendo.template($('#davinciconfirmed-template').html());
   kendo.chat.registerTemplate("davinciconfirmed", davinciconfirmed_template);

   const davincicode_template = kendo.template($('#davincicode-template').html());
   kendo.chat.registerTemplate("davincicode", davincicode_template);

   const confidence_template = kendo.template($('#confidence-template').html());
   kendo.chat.registerTemplate("confidence", confidence_template);

   const models_template = kendo.template($('#models-template').html());
   kendo.chat.registerTemplate("models", models_template);

   const daVinciUser = {
      id: 'daVinci',
      name: "da Vinci",
      iconUrl: "img/davinci.png"
   };

   const responses = {
      summary: {
         title: "Da Vinci data summaries",
         content: "To create summaries from your data, Da Vinci learns about the patterns and regularities in your numerical and other data, directly from your database. From its understanding of trends, anomalies, and other things that seem noteworthy, it is able to produce helpful written descriptions that can save hours of traditional data analysis.",
      },
      tile: {
         title: "Da Vinci predictive tiles",
         content: "The data displayed in this tile is based on Da Vinci's trend prediction machine learning model. This model learns from your data, identifies trends, and predicts future values.",
      },
      automation: {
         title: "Da Vinci automated process",
         content: "This process was designed by an admin, and utilises Da Vinci Vision to automatically identify fields and information on invoices, and map them to fields in Syspro.",
      }
   };

   const techInfo = {
      summary: {
         title: "Da Vinci data summaries",
         content: "Here is some technical information about the actual model used, perhaps confidence intervals, and the method (algorithm) of learning, etc.",
      },
      tile: {
         title: "Da Vinci predictive tiles",
         content: "Here is some technical information about the actual model used, perhaps confidence intervals, and the method (algorithm) of learning, etc.",
      },
   };

   let alreadyMatched = false;

   $("#davinciButton").kendoFloatingActionButton({
       size: "small",
       alignOffset: { x: 20, y: 35 },
       click: function() {
         $("#daVinciWindow").data("kendoWindow").open();
         setTimeout(function(){
            $("#daVinciChat .k-message-box input").focus();
         }, 220);
         
       }
   });

   const daVinciWindow = $("#daVinciWindow").kendoWindow({
      actions: ["More-Vertical", "Minus", "Plus", "Close"],
      draggable: false,
      resizable: false,
      width: "450px",
      height: "500px",
      // maxHeight: "750px",
      // maxWidth: "1000px",
      title: "Ask Da Vinci",
      visible: false,
      position: {
         top: window.innerHeight - 515,
         left: window.innerWidth - 465,
      },
      animation: { 
         open: { 
            effects: "slideIn:up fadeIn",
            duration: 150
         },
         close: { 
            effects: "slideIn:up fadeIn", 
            reverse: true,
            duration: 150
         } 
      },
      close: function(e) {
         daVinciWindow.setOptions({
            width: "450px",
            height: "500px",
            position: {
               top: window.innerHeight - 515,
               left: window.innerWidth - 465,
            },
         });
      },
      // maximize: function() {
      //    const daVinciWindow = $("#daVinciWindow").data("kendoWindow");
      //    console.log(daVinciWindow);
      //    daVinciWindow.setOptions({
      //       width: "750px",
      //       height: "1000px",
      //       position: {
      //          top: window.innerHeight - 775,
      //          left: window.innerWidth - 1025,
      //       },
      //    })
      // },
      // minimize: function() {
      //    daVinciWindow.setOptions({
      //       position: {
      //          top: window.innerHeight - 525,
      //          left: window.innerWidth - 475,
      //       },
      //    })
      // },
      // close: onClose
   }).data("kendoWindow")

   $("#openRulesWindow").on("click", function() {
      $("#rulesWindow").data("kendoWindow").center().open();
   });

   $("#openMatchRulesWindow").on("click", function() {
      $("#matchRulesWindow").data("kendoWindow").center().open();
   });

   // const rulesWindow2 = SYSPRO_VB.createKendoWindow(
   //    "#rulesWindow",
   //    "Match weightings",
   //    null,
   //    null,
   //    ["Close"],
   //    "350px",
   //    "400px",
   //    true,
   //    true,
   //    false,
   //    null,
   //    null,
   //    true,
   //    true,
   //    false
   // );
   const rulesWindow = $("#rulesWindow").kendoWindow({
      actions: ["Close"],
      draggable: true,
      resizable: false,
      width: "350px",
      height: "400px",
      title: "Match weightings",
      visible: false,

   }).data("kendoWindow");

   rulesWindow.wrapper.addClass('compact-window');

   const matchRulesWindow = $("#matchRulesWindow").kendoWindow({
      actions: ["Close"],
      draggable: true,
      resizable: false,
      width: "650px",
      height: "400px",
      title: "Match rules",
      visible: false,

   }).data("kendoWindow");

   matchRulesWindow.wrapper.addClass('compact-window');


   $("#autoMatch").on("click", function() {
      $("#loading-cover").show();
      setTimeout(function() {
         setMatchUI();
      }, 1500);
      setTimeout(function() {
         var template = kendo.template($("#match-template").html());
         const grid = $("#bankGrid").data("kendoGrid");
         const selectedData = grid.getSelectedData();
         var newHTML = template(selectedData[0]);
         $("#matchFound").html(newHTML);
         $("#loading-cover").hide();
      }, 1600);
      alreadyMatched = true;
      
   });

   $(document).on("click", '[aria-labelledby="daVinciWindow_wnd_title"] .k-svg-i-plus', function(e) {
   // $("#daVinciWindow").siblings(".k-window-titlebar").find(".k-svg-i-plus").parent().click(function (e) {
   // daVinciWindow.wrapper.find(".k-svg-i-plus").parent().on("click", function (e) {
      console.log(daVinciWindow);
      daVinciWindow.setOptions({
         width: window.innerWidth - 120,
         height: window.innerHeight - 70,
         position: {
            top: 55,
            left: 105,
         },
      });
      e.preventDefault();
   });

   $(document).on("click", '[aria-labelledby="daVinciWindow_wnd_title"] .k-svg-i-minus', function(e) {
   // $("#daVinciWindow").siblings(".k-window-titlebar").find(".k-svg-i-minus").parent().click(function (e) {
   // daVinciWindow.wrapper.find(".k-svg-i-minus").parent().on("click", function (e) {
      console.log(daVinciWindow);
      daVinciWindow.setOptions({
         width: "450px",
         height: "500px",
         position: {
            top: window.innerHeight - 515,
            left: window.innerWidth - 465,
         },
      });
      e.preventDefault();
   });

   var GridComponent = kendo.chat.Component.extend({
      init: function (options, view) {
         kendo.chat.Component.fn.init.call(this, options, view);

         // Create a <div> from which the Calendar will be initialized.
         var gridElement = $('<div>');

         // Initialize the grid component by passing the provided value.
         gridElement.kendoGrid({
            dataSource: [ { firstName: "John",
                  lastName: "Smith",
                  email: "john.smith@telerik.com" },
               { firstName: "Jane",
                  lastName: "Smith",
                  email: "jane.smith@telerik.com" },
               { firstName: "Josh",
                  lastName: "Davis",
                  email: "josh.davis@telerik.com" },
               { firstName: "Cindy",
                  lastName: "Jones",
                  email: "cindy.jones@telerik.com" }
            ]
         });

         // Place the grid within the Chat card.
         var bodyElement = $('<div>').addClass("k-card-body").append(gridElement);
         this.element.addClass("k-card").append(bodyElement);
      }
   });

   kendo.chat.registerComponent("GridComponent", GridComponent);

   var CodeComponent = kendo.chat.Component.extend({
      init: function (options, view) {
         kendo.chat.Component.fn.init.call(this, options, view);

         // Create a <div> from which the Calendar will be initialized.
         var gridElement = $('<div>');

         // Initialize the grid component by passing the provided value.
         gridElement.kendoGrid({
            dataSource: [ { firstName: "John",
                  lastName: "Smith",
                  email: "john.smith@telerik.com" },
               { firstName: "Jane",
                  lastName: "Smith",
                  email: "jane.smith@telerik.com" },
               { firstName: "Josh",
                  lastName: "Davis",
                  email: "josh.davis@telerik.com" },
               { firstName: "Cindy",
                  lastName: "Jones",
                  email: "cindy.jones@telerik.com" }
            ]
         });

         // Place the grid within the Chat card.
         var bodyElement = $('<div>').addClass("k-card-body").append(gridElement);
         this.element.addClass("k-card").append(bodyElement);
      }
   });

   kendo.chat.registerComponent("CodeComponent", CodeComponent);

   var chat = $("#daVinciChat").kendoChat({
        post: function (args) {
         console.log(args);
            // React on a user post action.
            if (![
               "Please provide more technical information.",
               "There's something wrong with this.",
               "Sorry to hear that, can you describe the problem?",
               "Who are the top 4 sales staff at Cycle Corp?",
               "Confirmation demo",
               "Go ahead",
               "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year.",
               "List Purchase Orders with issues",
               "List 16 new Purchase Orders"
            ].includes(args.text)) {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderMessage({
                     type: "text",
                     text: "Sorry I'm not sure what you mean 🤪 did you want to do one of these pre-formulated actions?"
                  }, daVinciUser);
                  chat.renderSuggestedActions([{
                     title: "Ask for a grid",
                     value: "Who are the top 4 sales staff at Cycle Corp?"
                  }, {
                     title: "Show confirmation",
                     value: "Confirmation demo"
                  },
                  {
                     title: "Produce code",
                     value: "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year."
                  }]);               
               }, 1500);
            }
        },
        actionClick: function(e) {
      /* The result can be observed in the DevTools(F12) console of the browser. */
            console.log(this);
            if (e.text === "Please provide more technical information.") {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               technicalInfo();
            } else if (e.text === "There's something wrong with this.") {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderMessage({
                     type: "text",
                     text: "Sorry to hear that, can you describe the problem?"
                  }, daVinciUser);
               }, 1500);
               
            } else if (e.text === "Who are the top 4 sales staff at Cycle Corp?") {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderAttachments({
                     attachments: [{
                        contentType: "GridComponent",
                        // content: {
                        // value: new Date()
                        // }
                     }]
                  }, daVinciUser);
                  chat.renderSuggestedActions([{
                     title: "Show confirmation",
                     value: "Confirmation demo"
                  },
                  {
                     title: "Produce code",
                     value: "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year."
                  }]);

                  initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
               }, 1500);
            } else if (e.text === "Confirmation demo") {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderAttachments({
                     attachments: [{
                        contentType: "davinciconfirm",
                        content: {
                           "title": "Confirm pending updates",
                           "content": "You have uploaded 16 files, and Da Vinci Vision will create 16 new Purchase Orders from these files. Da Vinci will inform you if any new Purchase Orders are missing required information. Would you like to proceed?",
                        }
                     }]
                  }, daVinciUser);

                  $(".k-message-list-content > div:last-child")[0].scrollIntoView();
                  initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
                  // chat.renderSuggestedActions([{
                  //    title: "Ask for a grid",
                  //    value: "Who are the top 4 sales staff at Cycle Corp?"
                  // },
                  // {
                  //    title: "Produce code",
                  //    value: "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year."
                  // }]);
               }, 1500);
            } else if (e.text === "Go ahead") {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderMessage({
                     // attachments: [{
                     //    contentType: "davinciconfirmed",
                     //    content: {
                     //       "content": "16 files have been processed, and 16 new Purchase Orders created. 3 have required information missing.",
                     //    }
                     // }]
                     type: "text",
                     text: "16 files have been processed, and 16 new Purchase Orders created. 3 have required information missing."
                  }, daVinciUser);  
                  chat.renderSuggestedActions([{
                     title: "List Purchase Orders with issues",
                     value: "List Purchase Orders with issues"
                  },
                  {
                     title: "List 16 new Purchase Orders",
                     value: "List 16 new Purchase Orders"
                  },
                  {
                     title: "Open PO Query",
                     value: "Open PO Query"
                  }]);                
               }, 1500);
            } else if (e.text === "List 16 new Purchase Orders" || e.text === "List Purchase Orders with issues") {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderAttachments({
                     attachments: [{
                        contentType: "davinciconfirmed",
                        content: {
                           "content": "<ul><li><a>PO B332DX</a></li><li><a>PO B332DX</a></li><li><a>PO B332DX</a></li></ul>",
                        }
                     }]
                  }, daVinciUser);  
                  initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
                  // chat.renderSuggestedActions([{
                  //    title: "List Purchase Orders with issues",
                  //    value: "List Purchase Orders with issues"
                  // },
                  // {
                  //    title: "List 16 new Purchase Orders",
                  //    value: "List 16 new Purchase Orders"
                  // },
                  // {
                  //    title: "Open PO Query",
                  //    value: "Open PO Query"
                  // }]);                
               }, 1500);
            } else if (e.text === "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year.") { 
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderAttachments({
                     attachments: [{
                        contentType: "davincicode",
                        // content: {
                        // value: new Date()
                        // }
                     }]
                  }, daVinciUser);
                  hljs.highlightAll();
                  chat.renderSuggestedActions([{
                     title: "Show confirmation",
                     value: "Confirmation demo"
                  },
                  {
                     title: "Ask for a grid",
                     value: "Who are the top 4 sales staff at Cycle Corp?"
                  }]);
                  initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
               }, 1500);
            
            } else {
               setTimeout(function() {
                  chat.renderUserTypingIndicator(daVinciUser);
               }, 400);
               setTimeout(function() {
                  chat.renderMessage({
                     type: "text",
                     text: "Sorry I'm not sure what you mean 🤪 - did you want to do one of these pre-formulated actions?"
                  }, daVinciUser);
                  chat.renderSuggestedActions([{
                     title: "Ask for a grid",
                     value: "Who are the top 4 sales staff at Cycle Corp?"
                  }, {
                     title: "Show confirmation",
                     value: "Confirmation demo"
                  },
                  {
                     title: "Produce code",
                     value: "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year."
                  }]);               
               }, 1500);

               
            }
            
            // e.preventDefault();
      }
   }).data("kendoChat");

   chat.renderSuggestedActions([{
        title: "Ask for a grid",
        value: "Who are the top 4 sales staff at Cycle Corp?"
    }, {
      title: "Show confirmation",
      value: "Confirmation demo"
    },
    {
      title: "Produce code",
      value: "Write me some script to make the text in field ARSPEN.SalesTotal green if the value is greater than for the same period, previous year, and red if the value is smaller than for the same period, previous year."
    }]);


   function technicalInfo() {
      
      // const popoverId = $(this).closest(".daVinciPopover").attr("id");
      // const trigger = $(`[aria-describedby="${popoverId}"]`);
      // const contentId = trigger.attr("data-content-id");
      setTimeout(function() {
         chat.clearUserTypingIndicator(daVinciUser);
         chat.renderAttachments({
            attachments: [{
               contentType: "technicalinfo",
               content: {
                  "title": techInfo["tile"].title,
                  "content": techInfo["tile"].content,
                  // "make": "Opel",
                  // "model": "Astra",
                  // "worth": "4000",
                  // "startDate": "2018-10-10"
               }
            }],
            attachmentLayout: "list"
         }, daVinciUser);
         $(".k-message-list-content > div:last-child")[0].scrollIntoView();
         initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
      }, 3000);
      
      
   };
    

   var salesData = [
            {
                "country": "United States",
                "year": "2012",
                "value": 30.1
            },
            {
                "country": "United States",
                "year": "2013",
                "value": 35.9
            },
            {
                "country": "United States",
                "year": "2014",
                "value": 43.1
            },
            {
                "country": "United States",
                "year": "2015",
                "value": 49.2
            },
            {
                "country": "United States",
                "year": "2016",
                "value": 59.0
            },
            {
                "country": "United States",
                "year": "2017",
                "value": 61.9
            },
            {
                "country": "United States",
                "year": "2018",
                "value": 65
            },
            {
                "country": "United States",
                "year": "2019",
                "value": 68.3
            },
            {
                "country": "United States",
                "year": "2020",
                "value": 69.2
            },
            {
                "country": "United States",
                "year": "2021",
                "value": 75.3
            },
            {
                "country": "United States",
                "year": "2022",
                "value": 74.2
            },
            
        ];
            const futureSales = [
            {
                "country": "United States",
                "year": "2022",
                "value": 74.2,
               //  "noteText": "Something"
            },
            {
                "country": "United States",
                "year": "2023",
                "value": 71.2
            },
            {
                "country": "United States",
                "year": "2024",
                "value": 74.2
            },
            {
                "country": "United States",
                "year": "2025",
                "value": 78.2,
               //  "noteText": "Something"
            }
         ];
            

         const exampleEl = document.getElementById('example')
         $(".daVinciPopoverTrigger").each(function(idx, elem) {
            const title = $(elem).attr("data-bs-title") || "Da Vinci Generated Text";
            const popover = new bootstrap.Popover(elem, {
               html: true,
               title: title,
               trigger: "click focus",
               template: '<div class="popover" role="popover"><div class="popover-arrow"></div><h3 class="popover-header"><i class="material-icons">auto_awesome</i> Da Vinci Generated Text</h3><div class="popover-body"></div><div class="popover-footer sys-bg-very-light-gray"><a data-bs-toggle="tooltip" data-bs-title="Ping" class="showmodelcard" href="#"><i class="material-icons sys-fg-gray sys-txt-sm">edit_note</i></a><a class="conflevel" href="#"><i class="material-icons sys-fg-success sys-txt-sm">data_usage</i><span class="sys-fg-gray sys-txt-sm sys-mg-l-5">84%</span></a><a class="daVinciTellMore" href="#"><i class="sys-txt-sm material-icons sys-fg-primary">question_mark</i></a></div></div>'
            });
         });

         $(".daVinciDataPopoverTrigger").each(function(idx, elem) {
            const title = $(elem).attr("data-bs-title") || "DaVinci insight";
            const popover = new bootstrap.Popover(elem, {
               html: true,
               title: title,
               trigger: "click focus",
               template: '<div class="popover" role="popover"><div class="popover-arrow"></div><h3 class="popover-header"><i class="material-icons">auto_awesome</i> Da Vinci Insight</h3><div class="popover-body"></div><div class="popover-footer sys-bg-very-light-gray"><a data-bs-toggle="tooltip" data-bs-title="Ping" class="showmodelcard" href="#"><i class="material-icons sys-fg-gray sys-txt-sm">insights</i></a><a class="conflevel" href="#"><i class="material-icons sys-fg-warning sys-txt-sm">data_usage</i><span class="sys-fg-gray sys-txt-sm sys-mg-l-5">65%</span></a><a class="daVinciTellMoreData" href="#"><i class="sys-txt-sm material-icons sys-fg-primary">question_mark</i></a></div></div>'
            });
         });

         $(".daVinciAutoPopoverTrigger").each(function(idx, elem) {
            const title = $(elem).attr("data-bs-title") || "Da Vinci Automated Process";
            const popover = new bootstrap.Popover(elem, {
               html: true,
               title: title,
               trigger: "click focus",
               template: '<div class="popover" role="popover"><div class="popover-arrow"></div><h3 class="popover-header"><i class="material-icons">auto_awesome</i> Da Vinci Automated Process</h3><div class="popover-body"></div><div class="popover-footer sys-bg-very-light-gray"><a data-bs-toggle="tooltip" data-bs-title="Ping" class="showmodelcard" href="#"><i class="material-icons sys-fg-gray sys-txt-sm">smart_toy</i></a><a class="daVinciTellMoreAuto" href="#"><i class="sys-txt-sm material-icons sys-fg-primary">question_mark</i></a></div></div>'
            });
         });

         $(".davincifield").each(function(idx, elem) {
            const popover = new bootstrap.Popover(elem, {
               html: true,
               title: "Da Vinci Generated Data",
               trigger: "hover",
               content: "Field value generated by Da Vinci",
               customClass: "daVinciPopover",
               template: '<div class="popover" role="popover"><div class="popover-arrow"></div><h3 class="popover-header"><i class="material-icons">auto_awesome</i> Da Vinci Automated Process</h3><div class="popover-body">Field value generated by Da Vinci</div><div class="popover-footer sys-bg-very-light-gray"><a data-bs-toggle="tooltip" data-bs-title="Ping" class="showmodelcard" href="#"><i class="material-icons sys-fg-gray sys-txt-sm">edit_note</i></a><a class="conflevel" href="#"><i class="material-icons sys-fg-success sys-txt-sm">data_usage</i><span class="sys-fg-gray sys-txt-sm sys-mg-l-5">84%</span></a><a class="daVinciTellMore" href="#"><i class="sys-txt-sm material-icons sys-fg-primary">question_mark</i></a></div></div>'
            });
         });
         
         // $(document).on("click", ".daVinciPopoverTrigger", function(e) {

         // });
         function initChatCardTooltips(elem) {
            $('[data-bs-toggle="tooltip"]', elem).each(function(idx, element) {
               const tooltip = new bootstrap.Tooltip(element);
            });            
         }

         $(document).on("click", ".daVinciTellMore", function(e) {
            const popoverId = $(this).closest(".daVinciPopover").attr("id");
            const trigger = $(`[aria-describedby="${popoverId}"]`);
            const contentId = trigger.attr("data-content-id");
            const popover = bootstrap.Popover.getInstance(trigger[0]);
            popover.hide();
            daVinciWindow.open();
            setTimeout(function(){
               $("#daVinciChat .k-message-box input").focus();
            }, 220);
            // chat.renderMessage({
            //    type: "text",
            //    text: popoverId
            // }, daVinciUser);

            chat.renderAttachments({
               attachments: [{
                  contentType: "davincisumresponse",
                  content: {
                     "title": responses[contentId].title,
                     "content": responses[contentId].content,
                     // "make": "Opel",
                     // "model": "Astra",
                     // "worth": "4000",
                     // "startDate": "2018-10-10"
                  }
               }],
               attachmentLayout: "list"
            }, daVinciUser);

            $(".k-message-list-content > div:last-child")[0].scrollIntoView();
            initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
            // chat.renderSuggestedActions([{
            //    title: "Tell me more",
            //    value: "more"
            // }]);
         });

         $(document).on("click", ".daVinciTellMoreData", function(e) {
            const popoverId = $(this).closest(".daVinciPopover").attr("id");
            const trigger = $(`[aria-describedby="${popoverId}"]`);
            const contentId = trigger.attr("data-content-id");
            const popover = bootstrap.Popover.getInstance(trigger[0]);
            popover.hide();
            daVinciWindow.open();
            setTimeout(function(){
               $("#daVinciChat .k-message-box input").focus();
            }, 220);

            chat.renderAttachments({
               attachments: [{
                  contentType: "davincitileresponse",
                  content: {
                     "title": responses[contentId].title,
                     "content": responses[contentId].content,
                  }
               }],
               attachmentLayout: "list"
            }, daVinciUser);

            $(".k-message-list-content > div:last-child")[0].scrollIntoView();
            initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
         });

         $(document).on("click", ".daVinciTellMoreAuto", function(e) {
            const popoverId = $(this).closest(".daVinciPopover").attr("id");
            const trigger = $(`[aria-describedby="${popoverId}"]`);
            const contentId = trigger.attr("data-content-id");
            const popover = bootstrap.Popover.getInstance(trigger[0]);
            popover.hide();
            daVinciWindow.open();
            setTimeout(function(){
               $("#daVinciChat .k-message-box input").focus();
            }, 220);

            chat.renderAttachments({
               attachments: [{
                  contentType: "davinciautoresponse",
                  content: {
                     "title": responses[contentId].title,
                     "content": responses[contentId].content,
                  }
               }],
               attachmentLayout: "list"
            }, daVinciUser);

            $(".k-message-list-content > div:last-child")[0].scrollIntoView();
            initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
         });

         $(document).on("click", ".conflevel", function(e) {      
            const popoverId = $(this).closest(".daVinciPopover").attr("id");
            const trigger = $(`[aria-describedby="${popoverId}"]`);
            const contentId = trigger.attr("data-content-id");
            const popover = bootstrap.Popover.getInstance(trigger[0]);
            popover?.hide();
            daVinciWindow.open();      
            chat.renderAttachments({
               attachments: [{
                  contentType: "confidence",
                  content: {
                     
                  }
               }],
               attachmentLayout: "list"
            }, daVinciUser);

            $(".k-message-list-content > div:last-child")[0].scrollIntoView();
            // initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
         });

         $(document).on("click", ".showmodelcard", function(e) {      
            const popoverId = $(this).closest(".daVinciPopover").attr("id");
            const trigger = $(`[aria-describedby="${popoverId}"]`);
            const contentId = trigger.attr("data-content-id");
            const popover = bootstrap.Popover.getInstance(trigger[0]);
            popover?.hide();
            daVinciWindow.open();      
            chat.renderAttachments({
               attachments: [{
                  contentType: "models",
                  content: {
                     
                  }
               }],
               attachmentLayout: "list"
            }, daVinciUser);

            $(".k-message-list-content > div:last-child")[0].scrollIntoView();
            // initChatCardTooltips($(".k-message-list-content > div:last-child")[0]);
         });

         $(document).on('click', '#approveMatch', function(e){
            e.preventDefault();
            const grid = $("#bankGrid").data("kendoGrid");
            const rowData = grid.getSelectedData();
            console.log(rowData);
            grid.clearSelection();
            const row = $(`tr[data-uid="${rowData[0].uid}"]`);
            console.log(row);
            row.addClass("sys-bg-primary");
            row.hide(800, function(){
               grid.removeRow(row);                 
               
               setMatchUI();
               grid.select(grid.tbody.find("tr.matchedItem").first());

               const template = kendo.template($("#match-template").html());
               const selectedData = grid.getSelectedData();
               var newHTML = template(selectedData[0]);
               $("#matchFound").html(newHTML);
                // grid.trigger("change");
            });
            // grid.select(grid.tbody.find("tr.matchedItem:first-child"))
        });

         function setMatchUI() {
            const grid = $("#bankGrid").data("kendoGrid");
            $(".matchedItem").each(function(idx, elem) {
               $(elem).addClass("matched");
            });
            $(".match-background").each(function(idx, elem) {
               $(elem).addClass("matchy");
            });
            grid.showColumn("confidence");
            grid.select("tr:eq(0)");
            $("#noMatch").hide();
            $("#matchFound").show();
            const tab = bootstrap.Tab.getInstance(document.querySelector('#matchTab'));
            tab.show();
         }

         $(document).on("click", "#filterGrid1", function() {
            const grid = $("#bankGrid").data("kendoGrid");
            grid.dataSource.filter( {});
            if (alreadyMatched) {
               setMatchUI();
               
            } else {
               grid.hideColumn("confidence");
            }
            
         });

         $(document).on("click", "#filterGrid2", function() {
            const grid = $("#bankGrid").data("kendoGrid");
            grid.hideColumn("confidence");
            if (alreadyMatched) {
               grid.dataSource.filter( { field: "autoMatch", operator: "equals", value: false });
            } else {
               grid.dataSource.filter( {});
            }
            
            $("#matchFound").hide();
            $("#noMatch").show();
            $(".match-background").each(function(idx, elem) {
               $(elem).removeClass("matchy");
            });
            const tab = bootstrap.Tab.getInstance(document.querySelector('#createTab'));
            tab.show();
                        
         });

         $(document).on("click", "#filterGrid3", function() {
            const grid = $("#bankGrid").data("kendoGrid");
            if (alreadyMatched) {
               
               grid.dataSource.filter( { field: "autoMatch", operator: "equals", value: true });
               setMatchUI();
               
            } else {
               
               grid.dataSource.filter( { field: "name", operator: "startswith", value: "zz" });
               grid.hideColumn("confidence");
            }
         });

         const bankData = [
            {
               name: "Jim's Auto",
               id: "00HG54",
               description: "",
               date: "21/10/2023",
               credit: 800.00,
               debit: 0.00,
               confidence: 1,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "21/10/2023",
               credit: 0.00,
               debit: 62.60,
               confidence: null,
               autoMatch: false,
            },
            {
               name: "HGB",
               id: "00HG54",
               description: "",
               date: "20/10/2023",
               credit: 12500.00,
               debit: 0.00,
               confidence: 0.94,
               autoMatch: true,
            },
            {
               name: "Clicks Pty",
               id: "00HG54",
               description: "",
               date: "20/10/2023",
               credit: 0.00,
               debit: 220.00,
               confidence: 0.96,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "20/10/2023",
               credit: 0.00,
               debit: 45.67,
               confidence: 0.72,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "17/10/2023",
               credit: 0.00,
               debit: 345.60,
               confidence: 0.80,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "17/10/2023",
               credit: 1230.00,
               debit: 0.00,
               confidence: null,
               autoMatch: false,
            },
            {
               name: "Standard Bank",
               id: "00HG54",
               description: "",
               date: "16/10/2023",
               credit: 0.00,
               debit: 2.87,
               confidence: 1,
               autoMatch: true,
            },
            {
               name: "Parts & Pies",
               id: "00HG54",
               description: "",
               date: "15/10/2023",
               credit: 4500.00,
               debit: 0.00,
               confidence: 0.90,
               autoMatch: true,
            },
            {
               name: "Starbucks",
               id: "00HG54",
               description: "",
               date: "15/10/2023",
               credit: 0.00,
               debit: 12.90,
               confidence: 1,
               autoMatch: true,
            },
            {
               name: "Jim's Auto",
               id: "00HG54",
               description: "",
               date: "15/10/2023",
               credit: 1680.00,
               debit: 0.00,
               confidence: 1,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "13/10/2023",
               credit: 0.00,
               debit: 349.00,
               confidence: null,
               autoMatch: false,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "10/10/2023",
               credit: 0.00,
               debit: 8.02,
               confidence: 0.78,
               autoMatch: true,
            },
            {
               name: "Apple Inc.",
               id: "00HG54",
               description: "",
               date: "10/10/2023",
               credit: 0.00,
               debit: 2200.40,
               confidence: 0.94,
               autoMatch: true,
            },
            {
               name: "MegaCorp",
               id: "00HG54",
               description: "",
               date: "10/10/2023",
               credit: 10070.00,
               debit: 0.00,
               confidence: 0.90,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "09/10/2023",
               credit: 0.00,
               debit: 430.00,
               confidence: 0.60,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "09/10/2023",
               credit: 0.00,
               debit: 1097.30,
               confidence: null,
               autoMatch: false,
            },
            {
               name: "Standard Bank",
               id: "00HG54",
               description: "",
               date: "08/10/2023",
               credit: 0.00,
               debit: 0.65,
               confidence: 1,
               autoMatch: true,
            },
            {
               name: "Jim's Auto",
               id: "00HG54",
               description: "",
               date: "07/10/2023",
               credit: 4500.00,
               debit: 0.00,
               confidence: 1,
               autoMatch: true,
            },
            {
               name: "",
               id: "00HG54",
               description: "",
               date: "06/10/2023",
               credit: 0.00,
               debit: 50.00,
               confidence: 0.78,
               autoMatch: true,
            },
         ];
         
         // const tabby = bootstrap.Tab.getInstance(document.querySelector('#createTab'));
         const tabby = new bootstrap.Tab(document.querySelector('#createTab'));
        // console.log(tabby);

         $("#bankGrid").kendoGrid({
               dataSource: {
                  data: bankData,
                  pageSize: 20,
                  schema: {
                     model: {
                           id: "id"
                     }
                  }
               },
               change: function onChange(arg) {
                  console.log(arg);
                  // const tabs = bootstrap.Tab.getInstance($("#matchTabs")[0]);
                  var template = kendo.template($("#match-template").html());
                  const selectedData = this.getSelectedData();
                  console.log(selectedData);
                  
                  var selected = $.map(this.select(), function(item) {
                     console.log(item);
                     if (alreadyMatched) {
                        if ($(item).hasClass("matchedItem")) {
                           const tab = bootstrap.Tab.getInstance(document.querySelector('#matchTab'));
                           console.log(tab);
                           tab.show();
                           $("#noMatch").hide();
                           $("#matchFound").show();
                           var newHTML = template(selectedData[0]);
                           $("#matchFound").html(newHTML);
                        } else {
                           const tabby = bootstrap.Tab.getInstance(document.querySelector('#createTab'));
                           console.log(tabby);
                           tabby.show();
                        }
                     } else {
                        const tabby = bootstrap.Tab.getInstance(document.querySelector('#createTab'));
                        console.log(tabby);
                        tabby.show();
                     }
                     return $(item).text();
                  });
                  
               },
               selectable: "row",
               pageable: false,
               sortable: true,
               scrollable: true,
               persistSelection: true,
               navigatable: true,
               dataBound: onDataBound,
               columns: [
                  {
                     field: "id",
                     title: "Transaction ID",
                     // width: 300
                  },
                  {
                     field: "name",
                     title: "Name",
                     // width: 300
                  },
                  {
                     field: "date",
                     title: "Date",
                     // format: "{dd/MM/yyyy}"
                  },
                  {
                     field: "debit",
                     title: "Debit",
                     format: "{0:c}",
                  },
                  {
                     field: "credit",
                     title: "Credit",
                     format: "{0:c}",
                  },
                  {
                     field: "description",
                     title: "Description",
                  },
                  {
                     field: "confidence",
                     title: "Match confidence",
                     format: "{0:p}",
                     // template: "<span id='chart_#= id#' class='sparkline-chart'></span>",
                     // width: 160,
                     template: function({confidence, id}) {

                        const pcent = confidence * 100;
                        return `<span id='chart_${id}' class='sparkline-chart'></span><span>${pcent}%</span>`;
                     },
                     width: 150,
                     headerTemplate: 'Match confidence <i class="material-icons pull-right align-right davinciicon-light sys-txt-sm">auto_awesome</i>'
                  },
               ]
         });

         function onDataBound(e) {
            var grid = this;
            grid.table.find("tr").each(function () {
                var dataItem = grid.dataItem(this);
                var themeColor = dataItem.autoMatch ? 'green' : 'error';
                var text = dataItem.Discontinued ? 'available' : 'not available';

                $(this).toggleClass('matchedItem', dataItem.autoMatch);

                $(this).find(".sparkline-chart").kendoSparkline({
                    legend: {
                        visible: false
                    },
                    series: [{
                        data: [{
                           value: dataItem.confidence * 100,
                           color: dataItem.confidence > 0.84 
                              ? "green"
                              : dataItem.confidence > 0.61 && dataItem.confidence < 0.85
                              ? "orange"
                              : "red",
                           
                        },
                        {
                           value: (1 - dataItem.confidence) * 100,
                           color: "#ccc",
                           
                        }                           
                           
                        ],
                        tooltip: {
                           visible: true,
                           background: "#444",
                           color: "#fff",
                           border: {
                              width: 0
                           },
                           template: function() {
                              var adjustConf = Math.round(dataItem.confidence * 100);
                              return adjustConf + "% chance";
                           }
                        }
                     }],
                    
                    type: "donut",
                    chartArea: {
                        margin: 0,
                        width: 30,
                        height: 22,
                        background: "transparent"
                    },
                    seriesDefaults: {
                     size: 3,
                     tooltip: {
                     visible: false
                    }
                    },
                    
                });

               //  $(this).find(".sparkline-chart").kendoSparkline({
               //      legend: {
               //          visible: false
               //      },
               //      data: [dataItem.confidence] * 100,
               //      type: "bar",
               //      chartArea: {
               //          margin: 0,
               //          width: 110,
               //          background: "transparent"
               //      },
               //      seriesDefaults: {
               //          bar: {
               //             size: 2,
               //             color: dataItem.confidence > .8 ? "green" : "orange",
               //          },
               //          labels: {
               //              visible: true,
               //              format: '{0}%',
               //              background: 'none'
               //          }
               //      },
               //      categoryAxis: {
               //          majorGridLines: {
               //              visible: false
               //          },
               //          majorTicks: {
               //              visible: false
               //          }
               //      },
               //      valueAxis: {
               //          type: "numeric",
               //          min: 0,
               //          max: 150,
               //          visible: false,
               //          labels: {
               //              visible: false
               //          },
               //          minorTicks: { visible: false },
               //          majorGridLines: { visible: false }
               //      },
               //      tooltip: {
               //          visible: false
               //      }
               //  });

                kendo.bind($(this), dataItem);
            });

            grid.hideColumn("confidence");
        }

        var data = [
            { text: "Account 1", value: "1" },
            { text: "Account 2", value: "2" },
            { text: "Account 3", value: "3" }
         ];

         // create DropDownList from input HTML element
         $("#fromAccount").kendoDropDownList({
            dataTextField: "text",
            dataValueField: "value",
            dataSource: data,
            index: 0,
         });

         var data1 = [
            { text: "Account 4", value: "1" },
            { text: "Account 5", value: "2" },
            { text: "Account 6", value: "3" }
         ];

         // create DropDownList from input HTML element
         $("#toAccount").kendoDropDownList({
            dataTextField: "text",
            dataValueField: "value",
            dataSource: data1,
            index: 0,
         });


   </script>
  
  </body>
</html>