<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>SYSPRO Product Visual Builder</title>

        <!-- Bootstrap -->
        <link href="css/UX_CSS_bootstrap.css" rel="stylesheet" />
        <link href="css/UX_CSS_kendo.common-bootstrap.min.css" rel="stylesheet" />
        <link href="css/UX_CSS_kendo.bootstrap.min.css" rel="stylesheet" />
        <link href="css/UX_CSS_kendo.dataviz.min.css" rel="stylesheet" />

        <link href="css/UX_CSS_kendo.dataviz.bootstrap.min.css" rel="stylesheet" />
				<link href="css/postcss.css" rel="stylesheet" />
				<link rel="stylesheet" href="css/gridstack.min.css">
				<link rel="stylesheet" href="css/gridstack-extra.css">

        <!-- <link href="css/UX_CSS_ripples.min.css" rel="stylesheet" />
        
        <link href="css/UX_CSS_forms.css" rel="stylesheet" /> -->
        <script id="treeview-template" type="text/kendo-ui-template">
          # if (item.subCategories || item.isDirectory) { #
              <i class="material-icons">folder</i>
          # } #
          # if (item.name === 'Recent') { #
              <i class="material-icons">access_time</i>
          # } #
          # if (item.name === 'Starred') { #
              <i class="material-icons">star</i>
          # } #
          #: item.name # 
      </script>
        <script>
            window.MSPointerEvent = null;
            window.PointerEvent = null;
        </script>
        <script type="text/javascript">
            WebFontConfig = {
                google: {
                    families: [
                        "Source+Sans+Pro:400,200,300,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic:latin",
                    ],
                },
            };
            (function() {
                var wf = document.createElement("script");
                wf.src = "https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";
                wf.type = "text/javascript";
                wf.async = "true";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(wf, s);
            })();
        </script>
        <script src="js/UX_JS_jquery.min.js"></script>
        <!-- <script src="js/UX_JS_velocity.min.js"></script> -->
        <script src="js/UX_JS_kendo.all.min.js"></script>

<style>
  .k-pdf-viewer .k-toolbar, .k-pdf-viewer .k-toolbar .k-button {
    background-color: var(--color_athens_gray_approx) !important;
  }
  
  .viewFiles, .viewFiles small {
    position: relative;
  }
  .k-dropzone {
            /* margin-bottom: 20px; */
            background-color: #ecf0f1 !important;
            cursor: pointer;
        }
        .pointerCursor {
          cursor: pointer !important;
        }
        .fileUploadDropZone {
            border: 1px solid #bdc3c7;
            background-color: #ecf0f1;
            border-radius: 2px;
            padding: 0px;
            margin-bottom: 5px;
            /* height: 124px; */
        }
        .fileUploadDropZone .k-widget {
            background-color: transparent;
        }
        .k-dropzone-hovered,
        .k-dropzone.k-dropzone-hovered .k-upload-button.k-button {
            border-radius: 8px;
            background-color: #e8f3f9 !important;
        }
        .k-dropzone .k-button {
            width: 100%;
            background-color: #ecf0f1 !important;
            height: 40px;
        }
        .k-upload.k-header {
            background: transparent;
            border: 0px solid transparent;
        }
        .k-dropzone .k-upload-button span {
            font-size: 22px;
            color: #7f8c8d;
        }
        .k-dropzone .k-upload-button span.badge {
            font-size: 12px;
            color: var(--white) !important;
        }
        .k-dropzone .material-icons {
            font-size: 40px;
        }
        .docPreview {
            display: flex;
            background: #ecf0f1;
            border-radius: 12px;
            height: 455px;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;  
        }
        .docPreview i {
            color: #bdc3c7;
            font-size: 100px;
            margin-bottom: 30px;
        }


        .form-group.label-floating label.control-label {
            margin-top: 0px;
            padding-top: 0px;
        }
        .form-group.label-floating:not(.is-empty) label.control-label, .form-group.label-floating.is-focused label.control-label {
            left: 0px;
        }
        .bootstrap-tagsinput {
            width: 100%;
            box-shadow: none;
            border: none;
            height: 33px;
        }
        #uploadFileWindow .form-group {
            margin-bottom: 30px;
            margin-top: 15px;
            
        }

        .has-tags.form-group.label-floating label.control-label {
            font-size: 12px;
            line-height: 1.07142857;
            top: -18px;
            left: 0px;
        }
        .image-preview {
            position: relative;
            vertical-align: middle;
            max-height: 45px;
            max-width: 60px;
        }
        .k-upload-status .k-i-warning {
            /* display: none; */
            color: #d92800;
            margin-right: 4px;
            font-size: 20px;
            
        }
        .k-upload-status .k-button {
            background-color: #ffffff !important;
            color: #333333 !important;
        }
        .k-file .k-icon {
            font-size: 20px;
        }
        .k-file .k-i-retry {
            color: #27ae60;
        }
        .k-file .k-i-close {
            color: #d92800;
        }
        .k-dropzone .k-upload-status.k-upload-status-total {
            display: none !important;
        }
        .k-upload-files .k-upload-status {
            opacity: 1;
            margin-left: auto !important;
        }
        .k-upload-files .k-file {
            align-items: center;
        }
        .k-upload-action:hover {
            opacity: 0.8;
        }
        .k-file-name {
            word-wrap: break-word;
            word-break: break-all;
            white-space: normal;
        }
        .k-file-name-size-wrapper {
            max-width: calc(100% - 35px - 7em);
        }
        .file-upload-details {
            display: none;
        }
</style>
    </head>

<body data-theme="" data-column-layout="" class="light-gradient-background body-view-mode">
  <nav id="fusion-toolbar" class="navbar navbar-default fixed-top navbar-controlbar fusion-top-toolbar toolbar-loaded">
    <div class="container-fluid">
        <ul class="nav navbar-nav navbar-left">
            <li class="nav-item">
                <a href="#" class="text-primary offcanvas-toggle fusion-main-page-buttons fusion-maininstance-buttons nav-link js-offcanvas-has-events" data-toggle="offcanvas" data-target="#fusion-sidebar-wrapper2" onclick="sysproInterop.bindProgramList($('#fusion-sidebar-wrapper2'));" style=""><i class="material-icons">menu</i></a>
            </li>
            <li>
                <a class="navbar-brand" href="#" onclick="sysproInterop.backToMenu();">
                    <img alt="Brand" src="img/UX_IMG_SYSPROLogo.png" style="height: 35px">
                </a>
            </li>
            <li class="nav-item back-to-menu">
                <a href="#" onclick="sysproInterop.backToMenu();" class="text-primary fusion-main-page-buttons fusion-maininstance-buttons nav-link" style=""><span class="hidden-xs">Home</span><i class="material-icons visible-xs">home</i></a>
            </li>
            <li class="nav-item breadcrumb-separator fusion-main-page-buttons" style="">
                <i class="material-icons">chevron_right</i>
            </li>
            <li class="nav-item sys-pd-l-10 application-sub-title fusion-main-page-buttons" style="">HOME MENU</li>
        </ul>
        <ul class="nav navbar-nav navbar-right sys-fg-primary">
            <li class=" nav-item">
                <a href="#" class="text-primary fusion-main-page-buttons nav-link fusion-current-account offcanvas-toggle js-offcanvas-has-events" onclick="sysproInterop.bindAvantiNotifications($('#fusion-sidebar-wrapper2'));" style="" data-toggle="offcanvas" data-target="#offcanvas-avanti-notifications">
                    <i class="material-icons">notifications</i>
                    <span class="badge sys-bg-danger avanti-notifications-count" style="display: none;"></span>
                </a>
            </li>

            <li class="dropdown nav-item">
                <a href="#" class="text-primary fusion-main-page-buttons nav-link fusion-current-account" data-toggle="dropdown" style=""><i class="material-icons">account_circle</i>
                    <span class="hidden-xs fusion-current-account-name">SYSPRO Administrator</span></a>
                <ul class="dropdown-menu multi-level nav sys-pd-t-5" role="menu">
                    <li>
                        <a href="#" class="syspro-toolbar-widget" onclick="sysproInterop.callPlugin('SRSMain', 'SRSQUE');"><i class="material-icons">list</i>Report Queue</a>
                    </li>
                    <li>
                        <a href="#" class="syspro-toolbar-widget" onclick="sysproInterop.showHelp();"><i class="material-icons">help</i>Help</a>
                    </li>
                    <li class="dropdown-submenu">
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#"><i class="material-icons">palette</i>Themes</a>
                        <ul class="dropdown-menu sys-pd-t-5">
                            <li>
                                <a href="#" class="avant-theme-switch" data-themename="light" onclick="sysproInterop.setTheme(this);"><i class="material-icons sys-mg-r-5 sys-fg-white">check</i>Light</a>
                            </li>
                            <li>
                                <a href="#" class="avant-theme-switch" data-themename="dark" onclick="sysproInterop.setTheme(this);"><i class="material-icons sys-mg-r-5 sys-fg-white">check</i>Dark</a>
                            </li>
                            <li>
                                <a href="#" class="avant-theme-switch" data-themename="syspro-light" onclick="sysproInterop.setTheme(this);"><i class="material-icons sys-mg-r-5 sys-fg-success">check</i>Pastel</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" class="syspro-toolbar-widget" onclick="sysproInterop.closeSYSPROFusion(true);"><i class="material-icons">power_settings_new</i> Sign out</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
  </nav>


  <div id="fusion-wrapper">
    <div id="harness-container">
      <div id="wrapper" class="toggled">
        <nav nav="" id="navbar-toolbar" class="navbar navbar-default navbar-static-top navbar-controlbar sys-mg-off-b syspro-toolbar ">
          <div class="container-fluid">
            <ul class="nav navbar-nav " data-column="0">
              <li data-guid="089924f1-ce90-4fad-856b-738e19f754bf" class="navbar-form form-inline" data-tooltip="tooltip" data-placement="bottom" data-trigger="hover" data-original-title="" data-container="body">
                  


                          <div class="form-group is-empty">
                              <span class="spinner"></span>
                              <label class="control-label" data-bind="htmltext:  Toolbar.IMPMENTB29001.Caption">ENTER PROGRAM</label>
                              <input id="Toolbar.IMPMENTB29001" type="text" tabindex="-1" class="form-control syspro-toolbar-widget syspro-toolbar-widget-change syspro-toolbar-widget-editfield syspro-trackfield-keydown" data-fieldname="Toolbar.IMPMENTB29001" data-bind="entryvalue: Toolbar.IMPMENTB29001.Value, predictivesearch: Toolbar.IMPMENTB29001.PredictiveSearch, entryfieldevents: Toolbar.IMPMENTB29001.EntryFieldEvents" data-entryfieldevents="Tab,Focus">
                              <span class="syspro-browse-button-container">
                                  <a class="syspro-browse-button" data-fieldname="Toolbar.IMPMENTB29001" data-bind="attr: { data-fieldvalue: Toolbar.IMPMENTB29001.Value, data-predictivesearchfield: Toolbar.IMPMENTB29001.PredictiveSearch  }" data-fieldvalue="" data-predictivesearchfield="undefined">
                                      <i class="material-icons">search</i>
                                  </a>
                              </span>
                          </div>
              </li>

              <li data-guid="94de2e6c-da7f-4ed2-8702-098f65b9b594" data-tooltip="tooltip" data-placement="bottom" data-original-title="a tooltip">
                  


                  <a class="btn btn-default navbar-btn internal-offcanvas-toggle in-modal-window" data-toggle="offcanvas" data-target="#offcanvas-e6cd80f0-6685-45c0-d2fd-903e90c2912a" data-fieldname="">
                          <i class="material-icons sys-fg-primary">adb</i>
                      
                  </a>

              </li>
            </ul>
            <ul class="nav navbar-nav navbar-right" data-column="1">
                





    <li data-guid="34e479c1-d81a-4b4d-e1f3-5f6d79dcebdb" class="" data-tooltip="tooltip" data-placement="bottom" data-trigger="hover" data-original-title="" data-container="body">
        


                <a id="Toolbar.IMPMENT200008" tabindex="-1" href="#" class="syspro-toolbar-widget syspro-toolbar-widget-button" data-fieldname="Toolbar.IMPMENT200008">
                        <i class="material-icons sys-fg-primary">refresh</i>
                    <span class="avanti-toolbar-button-caption" data-bind="htmltextnonull:  Toolbar.IMPMENT200008.ManualCaption">
                        
                    </span>
                </a>
    </li>






    <li data-guid="4190b40e-10e3-461b-b30c-2445b9000054" class="" data-tooltip="tooltip" data-placement="bottom" data-trigger="hover" data-original-title="Show Favorites" data-container="body">
        


                <a id="Toolbar.IMPMENTB01236" tabindex="-1" href="#" class="syspro-toolbar-widget syspro-toolbar-widget-button" data-fieldname="Toolbar.IMPMENTB01236">
                        <i class="material-icons sys-fg-primary">star</i>
                    <span class="avanti-toolbar-button-caption" data-bind="htmltextnonull:  Toolbar.IMPMENTB01236.ManualCaption">
                        
                    </span>
                </a>
    </li>






    <li data-guid="60a7de29-80ff-491d-af18-fe01266610eb" class="" data-tooltip="tooltip" data-placement="bottom" data-trigger="hover" data-original-title="Customize" data-container="body">
        


                <a id="Toolbar.xxxxxxxx11002" tabindex="-1" href="#" class="syspro-toolbar-widget syspro-toolbar-widget-button" data-fieldname="Toolbar.xxxxxxxx11002">
                        <i class="material-icons sys-fg-primary">settings</i>
                    <span class="avanti-toolbar-button-caption" data-bind="htmltextnonull:  Toolbar.xxxxxxxx11002.ManualCaption">
                        
                    </span>
                </a>
    </li>






    <li data-guid="daccbcd1-aaf5-4520-b75a-bedf1030290c" class="" data-tooltip="tooltip" data-placement="bottom" data-trigger="hover" data-original-title="Customize" data-container="body">
        


                <a id="Toolbar.xxxxxxxx11002" tabindex="-1" href="#" class="syspro-toolbar-widget syspro-toolbar-widget-button" data-fieldname="Toolbar.xxxxxxxx11002">
                        <i class="material-icons sys-fg-primary">settings</i>
                    <span class="avanti-toolbar-button-caption" data-bind="htmltextnonull:  Toolbar.xxxxxxxx11002.ManualCaption">
                        
                    </span>
                </a>
    </li>
            </ul>
          </div>
        </nav>
        <div class="container-fluid container-id-holder" id="main-container" style="padding-top: 40px;">
           
          <!-- Error Notification empty element -->
          <span id="errorNotification" style="display:none;"></span>
          <div class="row sys-mg-t-15">    
            <div class="col-sm-8 col-12 column-parent">
              <div class="panel sys-bd-off sys-box-shadow-off">
                <div class="panel-body main-column">
                  <div id="fileUploadWidget" class=" row widget layout-widget"> 
                    <div class="col-12">
                      <div class="fileUploadDropZone">
                        <input name="files" id="files" type="file" />
                      </div>
                    </div>
                    <div class="col-12">
                      <div 
                        id="inlineViewer" 
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-sm-4 col-12 column-parent">
              <div class="panel sys-bd-off sys-box-shadow-off">
                <div class="panel-body main-column">
                  <div id="fileUploadWidget2" class=" row widget layout-widget"> 
                    <div class="col-12">
                      <div class="fileUploadDropZone">
                        <input name="files2" id="files2" type="file" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>



        </div>
      </div>
      <div class="statusBar sys-bg-inverse" style="display: block;">
        <span class="status-message sys-fg-very-light-gray">The OUTDOORS Company (EDU1)  Your license expires February 1st           TUESDAY 8   JANUARY 2019</span>
      </div>
    </div>
    <footer id="thefooter" style="background-image: url('Samples/UX_IMG_cloud_erp_light_footer.png');">
      <span id="copyrightfooter">Â© SYSPRO All Rights Reserved. All trademarks are recognized.</span><span id="sysprofooter">Powered by SYSPRO ERP</span>
    </footer>

  </div>
  <div id="fileWindow"></div>
  <script src="js/UX_JS_bootstrap.js"></script>
  <script src="js/UX_JS_forms.js"></script>
  <!-- <script src="js/UX_JS_packery.min.js"></script> -->
  <script src="js/fitty.min.js"></script>
  <script src="js/jQuery.hoverForMore.js"></script>
      
  <script id="fileTemplate" type="text/x-kendo-template">
    <div>
        <p>Name: #=name#</p>
        <p>Size: #=size# bytes</p>
        <p>Extension: #=files[0].extension#</p>
        <strong class='k-upload-status'>
            <button type='button' class='k-upload-action'></button>
            <button type='button' class='k-upload-action'></button>
        </strong>
    </div>
  </script>      
  <script type="text/javascript">
    $.material.init();

    $(document).ready(function() {


      $("#files2").kendoUpload({
          async: {
              saveUrl: "http://127.0.0.1:5500/UXTools/api/UXFileProviderWeb/UploadDocument",
              removeUrl: "remove",
              autoUpload: true,
              withCredentials: false,
          },
          validation: {
              allowedExtensions: [".jpg", ".jpeg", ".png", ".bmp", ".gif", ".pdf", ".doc", ".docx", ".xls"],
          },
          // template: kendo.template($('#fileTemplate').html()),
          success: onSuccessFiles,
          complete: onComplete,
          showFileList: true,
          select: function(e) {
              var fileInfo = e.files[0];
              var wrapper = this.wrapper;
              console.log(fileInfo);
              // setTimeout(function(){
              //     addPreview(fileInfo, wrapper);
              // });
          }
          // dropZone: ".fileUploadDropZone",
      });

      $("#files").kendoUpload({
          async: {
              saveUrl: "http://127.0.0.1:5500/UXTools/api/UXFileProviderWeb/UploadDocument",
              removeUrl: "remove",
              autoUpload: true,
              withCredentials: false,
          },
          validation: {
              allowedExtensions: [".jpg", ".jpeg", ".png", ".bmp", ".gif", ".pdf", ".doc", ".docx", ".xls"],
          },
          // template: kendo.template($('#fileTemplate').html()),
          success: onSuccessFiles,
          complete: onComplete,
          showFileList: true,
          select: function(e) {
              var fileInfo = e.files[0];
              var wrapper = this.wrapper;
              console.log(fileInfo);
              // setTimeout(function(){
              //     addPreview(fileInfo, wrapper);
              // });
          }
          // dropZone: ".fileUploadDropZone",
      });

      $(".k-dropzone")
          .find("em")
          .remove();
      $(".k-dropzone .k-upload-button")
          .find("span")
          .text("Drop file here or click to upload")
          .addClass('pointerCursor')
          .append('<p class="viewFiles sys-txt-md"><small class=" sys-fg-primary">View uploaded files<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger sys-fg-white">4</span></small></p>');
      
          $(".k-dropzone .k-upload-button").prepend(
          "<h3 class='sys-mg-t-10 sys-mg-r-10'><i class='material-icons text-muted'>cloud_upload</i></h3>"
      );

      function onSuccessFiles(e) {
          console.log('upload success!');  
          $(".file-upload-details").show(300);                  
      }

      function onComplete(e) {
        // TODO: This should only run in cases where the viewer is shown inline below, not in cases where the viewer will be shown in a modal
        const collapse = new bootstrap.Collapse($('.k-upload-files')[0], {
          toggle: true,
        });
        $(".fileUploadDropZone").mouseenter(function () {
          collapse.show();
        });
        $(".fileUploadDropZone").mouseleave(function(){
          collapse.hide();
        });
        // $(".k-upload-files").mouseenter(function () {
        //   collapse.show();
        // });
        // $(".k-dropzone").mouseleave(function(){
        //   collapse.hide();
        // });
      }

    function onUpload(e) {
      console.log(e);
    }

    function onSuccess(e) {
        if (e.operation == "upload") {
            for (var i = 0; i < e.files.length; i++) {
                var file = e.files[i].rawFile;

                if (file) {
                    var reader = new FileReader();

                    reader.onloadend = function () {
                        $("<div class='product'><img src=" + this.result + " /></div>").appendTo($("#products"));
                    };

                    reader.readAsDataURL(file);
                }
            }
        }
    }
    
    
    $.when(
        $.getScript("https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.2/pdf.js"),
        $.getScript("https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.2/pdf.worker.js")
    )
    .done(function () {
        window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.2/pdf.worker.js';
    }).then(function () {
        $("#inlineViewer").kendoPDFViewer({
            pdfjsProcessing: {
                file: "https://josephclawrence.com/syspro/Syspro%20prototypes/taichi.pdf"
            },
            width: "100%",
            height: 800,
            toolbar: {
              items: [ 
                "pager", 
                "spacer", 
                {
                  name: 'zoom',
                  type: 'zoom',
                  command: 'ZoomCommand',
                  zoomInOut: true,
                  combobox: false,
                  enable: true
              }, 
                "print", 
                "download", 
                { name: "mailFile",  template: "<a role=\"button\"><span class=\"k-icon k-i-envelop\"></span></a>" }
              ]
            }
        });
        // viewModel = kendo.observable({
        //     onRender: function (e) {
        //         console.log("page rendered: " + e.page.pageNumber);
        //     },
        //     onOpen: function (e) {
        //         console.log("file open: " + e.file.name);
        //     },
        //     onError: function (e) {
        //         console.log("error message: " + e.message);
        //     },
        //     toolbar: {
        //       items: [   
        //       "open", "download" ,        
        //         {
        //           name: "myCustomTool",
        //           template: "<button>My custom button </button>"
        //         }
        //       ]
        //     }
        // });
        // kendo.bind($("#fileUploadWidget"), viewModel);

        // var pdfViewer = $("#inlineViewer").kendoPDFViewer({
        //     pdfjsProcessing: {
        //         file: "taichi.pdf"
        //     },
        //     width: "100%",
        //     height: 700
        // }).data("kendoPDFViewer");

        // $("#loadFile").click(function () {
        //     pdfViewer.fromFile("../taichi.pdf")
        // });

        // function onChange(e) {
        //     var value = this.value();
        //     changePdfViewerPage(value)
        // }



        // function changePdfViewerPage(value) {
        //     pdfViewer.activatePage(value);
        // }
    });

    
    // File viewer window
        var fileWindow = $("#fileWindow");
        
        $(document).on("click", ".fileviewerlink", function(e) {
          e.preventDefault();
            const fileName = $(this).data("filename");
            const fileExtension = $(this).data("extension");;
            // fileWindow.data("kendoWindow").setOptions({
            //   content: {
            //     url: "https://duffssuitcase.com/upl/" + fileName},
            //     iframe: true,
            //   }
            // );
            let url;
            if (["jpg", "jpeg", "png", "gif", "bmp", "tif", "tiff", "svg"].includes(fileExtension)) {
              url = "https://duffssuitcase.com/upl/" + fileName;
            } else if (["doc", "docx", "xls", "xlsx", "ppt", "pptx"].includes(fileExtension)) {
              url = "https://view.officeapps.live.com/op/embed.aspx?src=https://duffssuitcase.com/upl/" + fileName;
            } else if (fileExtension === "pdf") {
              url = "https://docs.google.com/viewer?embedded=true&url=https://duffssuitcase.com/upl/" + fileName +  "&chrome=true";
            } else {
              url = "https://duffssuitcase.com/upl/" + fileName;
            }
            fileWindow.data("kendoWindow").refresh({
              url: url,
              iframe: true,
            });
            fileWindow.data("kendoWindow").maximize().open();
          });
        
        fileWindow.kendoWindow({
                width: "900px",
                height: "800px",
                visible: false,
                content: {
                  url: "",
                  iframe: true
                },
                actions: [
                    "Minimize",
                    "Maximize",
                    "Close"
                ],
                close: function() {
                  fileWindow.data("kendoWindow").refresh({
                    url: '',
                    iframe: true,
                  });
                }
                // close: onClose
            });

          $(document).on("click", ".k-file-success", function(e) {
            const fileName = $(this).find(".k-file-name").attr("title");
            const fileExtension = $(this).find(".k-file-extension").text();
            // fileWindow.data("kendoWindow").setOptions({
            //   content: {
            //     url: "https://duffssuitcase.com/upl/" + fileName},
            //     iframe: true,
            //   }
            // );
            let url;
            if (["jpg", "jpeg", "png", "gif", "bmp", "tif", "tiff", "svg"].includes(fileExtension)) {
              url = "https://duffssuitcase.com/upl/" + fileName;
            } else if (["doc", "docx", "xls", "xlsx", "ppt", "pptx"].includes(fileExtension)) {
              url = "https://view.officeapps.live.com/op/embed.aspx?src=https://duffssuitcase.com/upl/" + fileName;
            } else if (fileExtension === "pdf") {
              url = "https://docs.google.com/viewer?embedded=true&url=https://duffssuitcase.com/upl/" + fileName +  "&chrome=true";
            } else {
              url = "https://duffssuitcase.com/upl/" + fileName;
            }
            fileWindow.data("kendoWindow").refresh({
              url: url,
              iframe: true,
            });
            fileWindow.data("kendoWindow").maximize().open();
          });

    });

  </script>
  
  </body>
</html>